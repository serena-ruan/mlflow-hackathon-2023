/** @jsxRuntime classic /
/** @jsx jsx */
import { useRef, useEffect, useState } from 'react';
import cx from 'classnames';
import { jsx } from '@emotion/react';
import { ChevronRight } from 'react-feather';
import { Text } from '../../index';
import NavLink from './NavLink';
import styles from './Nav.css';
import { isBrowser } from '../../helpers';
const InnerLink = ({ theme, link }) => (jsx("span", { className: cx('uil-fsz-16 uil-ff-poppins', theme === 'dark'
        ? 'uil-color-grey-300 hover:uil-color-grey-100'
        : 'uil-color-grey-500 hover:uil-color-grey-900') }, link.title));
const SecondaryNav = ({ breadcrumb, internalLinkTag = 'a', links, theme, secondaryRef, }) => {
    const secondaryNavInnerRef = useRef(null);
    const [hasGradient, setHasGradient] = useState(false);
    const detectWidth = () => secondaryNavInnerRef &&
        secondaryNavInnerRef.current &&
        setHasGradient(secondaryNavInnerRef.current.scrollWidth > document.body.clientWidth);
    useEffect(() => {
        if (isBrowser) {
            detectWidth();
            window.addEventListener('resize', () => detectWidth());
            return () => window.removeEventListener('resize', detectWidth);
        }
        return () => { };
    }, [secondaryNavInnerRef]);
    return (jsx("div", { className: cx('secondary-nav uil-pos-sticky uil-top-0 uil-left-0 uil-z-2 uil-d-flex uil-jc-center uil-ov-hidden', theme === 'dark' ? 'uil-bgc-grey-900' : 'uil-bgc-grey-100'), ref: secondaryRef, css: theme && styles.secondaryNav(theme, hasGradient) },
        jsx("div", { className: "uil-pos-relative uil-ovy-hidden uil-w-100p uil-maw-1440 uil-m-auto uil-d-flex uil-ovx-auto uil-ws-nowrap", ref: secondaryNavInnerRef, css: styles.secondaryNavInner },
            jsx("div", { className: "uil-d-flex uil-w-100p uil-ai-center uil-ph-12 uil-h-100p md:uil-ph-20" },
                jsx("ul", { className: "uil-p-0 uil-m-0 uil-mr-16 uil-d-flex uil-ai-center uil-h-auto uil-lis-none" }, breadcrumb.map((level, index) => (jsx("li", { key: `${level.title}${level.url}`, className: "uil-d-flex uil-ai-center" },
                    index !== 0 && (jsx("span", { className: "uil-h-24" },
                        jsx(ChevronRight, { className: "uil-color-grey-500 uil-h-20 uil-w-auto", strokeWidth: 1 }))),
                    jsx(Text, { className: "uil-fw-bold", color: theme === 'dark' ? 'white' : 'grey' },
                        jsx(NavLink, { internalLinkTag: internalLinkTag, to: level.url, title: level.title, withUrlPrefix: false, className: "uil-color-current uil-fsz-16 lg:uil-fsz-18" }, level.title)))))),
                jsx("ul", { className: cx('uil-lis-none uil-d-flex uil-ai-center uil-pl-16 uil-m-0 uil-h-100p uil-fxg-1', hasGradient ? 'uil-pr-80' : 'uil-pr-16') }, links.map((link) => (jsx("li", { key: `${link.title}${link.url}`, className: cx('uil-h-100p uil-ph-8 uil-d-flex uil-ai-center', breadcrumb[breadcrumb.length - 1].url === link.url &&
                        'uil-fw-bold') },
                    jsx(NavLink, { internalLinkTag: internalLinkTag, to: link.url, title: link.title, withUrlPrefix: false, className: "uil-fsz-16 lg:uil-fsz-18" },
                        jsx(InnerLink, { theme: theme, link: link }))))))))));
};
export default SecondaryNav;
