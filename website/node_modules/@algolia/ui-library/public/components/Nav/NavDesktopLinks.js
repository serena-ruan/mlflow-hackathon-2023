"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
/** @jsxRuntime classic /
/** @jsx jsx */
const react_1 = require("react");
const classnames_1 = __importDefault(require("classnames"));
const react_2 = require("@emotion/react");
const NavDesktopLink_1 = __importDefault(require("./NavDesktopLink"));
const Nav_data_1 = __importDefault(require("./Nav.data"));
const SubNav_data_1 = __importDefault(require("./SubNav.data"));
const Nav_css_1 = __importDefault(require("./Nav.css"));
const helpers_1 = require("../../helpers");
const isCurrentlyInFolder = (title) => {
    if (!helpers_1.isBrowser)
        return false;
    const folder = SubNav_data_1.default.find(item => item.title === title);
    if (!folder)
        return false;
    const inLinks = folder.links.find(item => item.url === window.location.pathname && !item.dismissHover);
    if (inLinks)
        return true;
    if (folder.sidebar) {
        return folder.sidebar.find(item => item.url === window.location.pathname && !item.dismissHover);
    }
};
const NavDesktopLinks = ({ current, Link, setCurrent, setDesktopSubNavLeftPosition, setDesktopSubNavTopPosition, theme, }) => {
    const ref = react_1.useRef(null);
    react_1.useEffect(() => {
        if (helpers_1.isBrowser) {
            const events = ['click', 'load', 'resize', 'scroll'];
            const updateScrollPosition = () => setTimeout(function () {
                if (ref.current) {
                    setDesktopSubNavTopPosition(ref.current.getBoundingClientRect().top +
                        ref.current.getBoundingClientRect().height);
                }
            }, 250);
            updateScrollPosition();
            events.map(event => window.addEventListener(event, () => updateScrollPosition()));
            return () => {
                events.map(event => window.removeEventListener(event, () => updateScrollPosition()));
            };
        }
        return () => { };
    }, []);
    return (react_2.jsx("div", { ref: ref, className: "uil-d-none md:uil-fxg-1 md:uil-pos-sticky md:uil-z-5 md:uil-top-0 md:uil-d-block", "data-uil-nav-desktop-links": true },
        react_2.jsx("div", { className: "uil-pos-relative lg:uil-ph-20" },
            react_2.jsx("div", { className: "uil-d-flex uil-ai-center uil-jc-between uil-maw-1440 uil-m-auto" },
                react_2.jsx("ul", { className: "uil-d-flex uil-m-0 uil-p-0 uil-lis-none" }, Nav_data_1.default.map((link, index) => (react_2.jsx("li", { className: classnames_1.default(index > 0 && 'uil-ml-8 lg:uil-ml-16', 'uil-pos-relative'), key: link.title, css: Nav_css_1.default.desktopNavLinkBefore(current === link.title || isCurrentlyInFolder(link.title), theme), "data-title": link.title },
                    react_2.jsx(NavDesktopLink_1.default, { onFocus: (e) => {
                            setCurrent(link.title);
                            if (e.target)
                                setDesktopSubNavLeftPosition(e.target.getBoundingClientRect().left);
                        }, onMouseExit: () => setCurrent(''), onMouseEnter: (e) => {
                            setCurrent(link.title);
                            if (e.target)
                                setDesktopSubNavLeftPosition(e.target.getBoundingClientRect().left);
                        }, isCurrent: current === link.title || isCurrentlyInFolder(link.title), tag: Link, theme: theme, link: link })))))))));
};
exports.default = NavDesktopLinks;
//# sourceMappingURL=NavDesktopLinks.js.map